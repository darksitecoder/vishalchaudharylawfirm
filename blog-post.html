<!doctype html>
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Legal Blog - Articles & Insights</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Premium Law Firm - Professional Legal Solutions"
    />
    <meta name="author" content="Vishal Chaudhary's Law Firm" />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
      rel="stylesheet"
    />
    <title>Vishal Chaudhary's Law Firm Attorneys & Legal Consultants</title>
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css" />
    <link rel="stylesheet" href="assets/css/templatemo-finance-business.css" />
    <link rel="stylesheet" href="assets/css/owl.css" />
    <link rel="stylesheet" href="assets/css/custom-services-menu.css" />
    <style>
      :root {
        --bg: #f8f9fa;
        --accent: #c3a167;
        --dark: #0b1b2e;
        --muted: #666;
      }
      /* body{font-family: 'Georgia', serif; background:var(--bg); color:#000; margin:0;}
        .container{max-width:1000px;margin:40px auto;padding:20px} */
      .post-hero {
        background: linear-gradient(135deg, var(--dark) 0%, #1a2f45 100%);
        color: #fff;
        padding: 40px 30px;
        border-radius: 8px;
        margin-bottom: 30px;
      }
      .post-title {
        font-size: 2.6em;
        margin-bottom: 8px;
      }
      .post-meta {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
        color: var(--muted);
        margin-bottom: 10px;
      }
      .post-category {
        background: var(--dark);
        color: var(--accent);
        padding: 6px 12px;
        border-radius: 3px;
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.85em;
        width: fit-content;
      }
      .post-hero-image {
        width: 100%;
        max-height: 480px;
        object-fit: cover;
        border-radius: 6px;
        margin-top: 20px;
      }
      .post-body {
        background: #fff;
        padding: 5px;
        border-radius: 8px;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 30px;
      }
      .post-body p {
        line-height: 1.8;
        color: #222;
        margin-bottom: 16px;
        font-size: 18px;
        text-align: justify;
      }
      .post-tags {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 18px;
      }
      .tag {
        background: #f5f5f5;
        padding: 6px 12px;
        border-radius: 12px;
        color: var(--dark);
        border: 1px solid #e0e0e0;
      }
      .author {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .author-avatar {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: var(--accent);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
      }
      .back-link {
        display: inline-block;
        margin-bottom: 18px;
        color: var(--dark);
        text-decoration: none;
        font-weight: 600;
      }
      .not-found {
        background: #fff;
        padding: 30px;
        border-radius: 8px;
        text-align: center;
      }
      @media (max-width: 768px) {
        .post-title {
          font-size: 1.8em;
        }
      }

      .blog-post-category {
        background: #0b1b2e;
        color: #c3a167;
        padding: 6px 14px;
        border-radius: 3px;
        font-size: 0.8em;
        font-weight: 600;
        text-transform: uppercase;
        white-space: nowrap;
      }

      .blog-post-date {
        color: #666;
        font-size: 0.9em;
        white-space: nowrap;
      }

      .blog-post-title {
        font-size: 1.8em;
        color: #0b1b2e;
        margin-bottom: 15px;
        font-weight: 700;
        line-height: 1.3;
      }

      .blog-post-excerpt {
        color: #444;
        margin-bottom: 15px;
        flex-grow: 1;
        line-height: 1.7;
        font-size: 0.95em;
      }

      .blog-post-tags-wrapper {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 15px;
      }

      .blog-post-tag-badge {
        background: #f5f5f5;
        color: #0b1b2e;
        padding: 5px 12px;
        border-radius: 12px;
        font-size: 0.8em;
        font-weight: 500;
        border: 1px solid #e0e0e0;
      }

      .blog-post-meta-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 15px;
        border-top: 1px solid #e0e0e0;
        margin-top: auto;
      }

      .blog-post-author-info {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
      }

      .blog-post-author-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #c3a167;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.85em;
        object-fit: cover;
        flex-shrink: 0;
      }

      .blog-post-author-name {
        font-weight: 600;
        color: #0b1b2e;
        font-size: 0.95em;
      }

      .blog-post-read-time {
        color: #666;
        font-size: 0.85em;
        white-space: nowrap;
      }

      .blog-sidebar {
        position: sticky;
        top: 20px;
        height: fit-content;
      }

      .blog-sidebar-widget {
        background: #fff;
        padding: 25px;
        border-radius: 8px;
        margin-bottom: 25px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .blog-widget-title {
        color: #0b1b2e;
        font-size: 1.4em;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 3px solid #c3a167;
        font-weight: 700;
      }

      .blog-categories-list {
        list-style: none;
      }

      .blog-category-item {
        padding: 12px 0;
        border-bottom: 1px solid #f0f0f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: padding-left 0.3s;
      }

      .blog-category-item:hover {
        padding-left: 10px;
        color: #c3a167;
      }

      .blog-category-item.blog-active-category {
        color: #c3a167;
        font-weight: 600;
      }

      .blog-category-name {
        font-weight: 500;
      }

      .blog-category-count {
        background: #0b1b2e;
        color: #c3a167;
        padding: 3px 10px;
        border-radius: 12px;
        font-size: 0.85em;
        font-weight: 600;
      }

      .blog-tags-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .blog-tag-item {
        background: #f5f5f5;
        color: #0b1b2e;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        cursor: pointer;
        transition: all 0.3s;
        border: 2px solid transparent;
      }

      .blog-tag-item:hover,
      .blog-tag-item.blog-active-tag {
        background: #0b1b2e;
        color: #c3a167;
        border-color: #c3a167;
      }

      .blog-recent-posts-list {
        list-style: none;
      }

      .blog-recent-post-item {
        padding: 15px 0;
        border-bottom: 1px solid #f0f0f0;
        cursor: pointer;
      }

      .blog-recent-post-item:last-child {
        border-bottom: none;
      }

      .blog-recent-post-title {
        color: #0b1b2e;
        font-size: 0.95em;
        font-weight: 600;
        margin-bottom: 5px;
        line-height: 1.4;
        transition: color 0.3s;
      }

      .blog-recent-post-item:hover .blog-recent-post-title {
        color: #c3a167;
      }

      .blog-recent-post-date {
        color: #888;
        font-size: 0.8em;
      }

      .blog-pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin-top: 50px;
      }

      .blog-pagination-btn {
        padding: 10px 18px;
        border: 2px solid #0b1b2e;
        background: #fff;
        color: #0b1b2e;
        cursor: pointer;
        border-radius: 5px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .blog-pagination-btn:hover {
        background: #0b1b2e;
        color: #c3a167;
      }

      .blog-pagination-btn.blog-active-page {
        background: #c3a167;
        border-color: #c3a167;
        color: #fff;
      }

      .blog-pagination-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .blog-newsletter-widget {
        background: linear-gradient(135deg, #0b1b2e 0%, #1a2f45 100%);
        color: #fff;
        padding: 30px;
        border-radius: 8px;
        text-align: center;
      }

      .blog-newsletter-title {
        color: #fff;
        font-size: 1.3em;
        margin-bottom: 10px;
      }

      .blog-newsletter-text {
        color: #c3a167;
        margin-bottom: 20px;
        font-size: 0.95em;
      }

      .blog-newsletter-form {
        display: flex;
        gap: 10px;
      }

      .blog-newsletter-input {
        flex: 1;
        padding: 12px 15px;
        border: none;
        border-radius: 5px;
        font-size: 0.95em;
      }

      .blog-newsletter-submit {
        padding: 12px 25px;
        background: #c3a167;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 600;
        transition: background 0.3s;
      }

      .blog-newsletter-submit:hover {
        background: #b59157;
      }

      .blog-no-results {
        text-align: center;
        padding: 60px 20px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .blog-no-results-title {
        color: #0b1b2e;
        font-size: 1.5em;
        margin-bottom: 10px;
      }

      .blog-no-results-text {
        color: #666;
      }

      @media (max-width: 1024px) {
        .blog-main-wrapper {
          grid-template-columns: 1fr;
        }

        .blog-sidebar {
          position: static;
        }

        .blog-post-card {
          grid-template-columns: 280px 1fr;
        }

        .blog-post-image-wrapper {
          height: 220px;
        }
      }

      @media (max-width: 768px) {
        .blog-hero-title {
          font-size: 2em;
        }

        .blog-hero-section {
          padding: 40px 20px;
        }

        .blog-post-card {
          grid-template-columns: 1fr;
        }

        .blog-post-image-wrapper {
          height: 250px;
          width: 100%;
        }

        .blog-post-title {
          font-size: 1.5em;
        }

        .blog-filters-bar {
          flex-direction: column;
        }

        .blog-search-box {
          width: 100%;
        }

        .blog-sort-dropdown {
          width: 100%;
        }

        .blog-newsletter-form {
          flex-direction: column;
        }

        .blog-post-content-wrapper {
          padding: 20px;
        }

        .blog-post-meta-bottom {
          flex-wrap: wrap;
          gap: 10px;
        }
      }

      @media (max-width: 480px) {
        .blog-hero-title {
          font-size: 1.5em;
        }

        .blog-hero-subtitle {
          font-size: 1em;
        }

        .blog-post-title {
          font-size: 1.3em;
        }

        .blog-container {
          padding: 20px 10px;
        }

        .blog-post-card {
          margin-bottom: 20px;
        }

        .blog-pagination {
          flex-wrap: wrap;
          gap: 5px;
        }

        .blog-pagination-btn {
          padding: 8px 12px;
          font-size: 0.9em;
        }
      }
    </style>
  </head>
  <body>
    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
      <div class="jumper">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- Header - Loaded Dynamically -->
    <div id="header-placeholder"></div>
    <div class="container pb-5">
      <a
        class="back-link mt-5"
        id="backToBlog"
        href="/blog.html"
        style="margin-top: 10rem"
        >‚Üê Back to Articles</a
      >

      <div class="row">
        <div id="postHero" class="post-hero pt-4" style="display: none">
          <div class="post-category" id="postCategory"></div>
          <h1 class="post-title" id="postTitle"></h1>
          <div class="post-meta">
            <div id="postDate"></div>
            <div id="postAuthor"></div>
            <div id="postReadTime"></div>
          </div>
          <img
            id="postHeroImage"
            class="post-hero-image"
            src="https://via.placeholder.com/1200x480?text=Article+Image"
            alt=""
          />
        </div>
        <main class="col-lg-8">
          <div id="postBody" class="post-body" style="display: none"></div>

          <div id="postTags" class="post-tags" style="display: none"></div>

          <div id="postNotFound" class="not-found" style="display: none">
            <h2>Article not found</h2>
            <p>
              We couldn't find the article you're looking for. It may have been
              removed or the URL is incorrect.
            </p>
            <p><a href="/blog.html">Return to the blog listing</a></p>
          </div>
        </main>

        <aside class="col-lg-4">
          <div class="blog-sidebar-widget mb-4">
            <h3 class="blog-widget-title">Categories</h3>
            <ul class="blog-categories-list" id="blogCategoriesList">
              <li style="padding: 12px 0; color: #666; text-align: center">
                Loading...
              </li>
            </ul>
          </div>

          <div class="blog-sidebar-widget mb-4">
            <h3 class="blog-widget-title">Popular Tags</h3>
            <div class="blog-tags-cloud" id="blogTagsCloud">
              <div style="color: #666">Loading...</div>
            </div>
          </div>

          <div class="blog-sidebar-widget">
            <h3 class="blog-widget-title">Recent Posts</h3>
            <ul class="blog-recent-posts-list" id="blogRecentPostsList">
              <li style="padding: 12px 0; color: #666; text-align: center">
                Loading...
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>

    <script>
      // SANITY CONFIG - mirror blog.html
      const SANITY_CONFIG = {
        projectId: "vmnkeya7",
        dataset: "production",
        apiVersion: "2024-01-26",
        useCdn: true,
      };
      const SANITY_BASE_URL = `https://${SANITY_CONFIG.projectId}.api.sanity.io/v${SANITY_CONFIG.apiVersion}/data/query/${SANITY_CONFIG.dataset}`;

      function buildSanityImageUrl(imageRef, width = 1200, height = 480) {
        if (!imageRef)
          return "https://via.placeholder.com/1200x480?text=No+Image";
        if (typeof imageRef === "string" && imageRef.startsWith("http"))
          return imageRef;
        let url = null;
        if (imageRef?.asset?.url) url = imageRef.asset.url;
        else if (imageRef?.url) url = imageRef.url;
        if (url) {
          const separator = url.includes("?") ? "&" : "?";
          return `${url}${separator}w=${width}&h=${height}&fit=crop`;
        }
        return "https://via.placeholder.com/1200x480?text=Article+Image";
      }

      function formatDate(dateString) {
        if (!dateString) return "";
        const options = { year: "numeric", month: "long", day: "numeric" };
        return new Date(dateString).toLocaleDateString("en-US", options);
      }

      function calculateReadTime(content) {
        if (!content) return "5 min read";
        const wordsPerMinute = 200;
        const textContent =
          typeof content === "string" ? content : JSON.stringify(content);
        const wordCount = textContent.split(/\s+/).length;
        const minutes = Math.max(1, Math.ceil(wordCount / wordsPerMinute));
        return `${minutes} min read`;
      }

      function getQueryParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      

      async function fetchFromSanity(query) {
        try {
          const url = `${SANITY_BASE_URL}?query=${encodeURIComponent(query)}`;
          const res = await fetch(url);
          if (!res.ok) throw new Error("Network response was not ok");
          const json = await res.json();
          return json.result;
        } catch (err) {
          console.error("Sanity fetch error", err);
          // Return null to allow fallback to local sample data
          return null;
        }
      }

      // Sidebar rendering: categories, tags, recent posts
      const SIDEBAR = {
        categoriesQuery: `*[_type == "category"]{ _id, title, slug, "count": count(*[_type == "post" && references(^._id)]) } | order(count desc)`,
        tagsQuery: `*[_type == "tag"]{ _id, title, slug } | order(title asc)`,
        recentPostsQuery: `*[_type == "post"] | order(publishedAt desc)[0..4]{ _id, title, slug, publishedAt }`,
      };

      async function loadSidebar() {
        try {
          const [categories, tags, recent] = await Promise.all([
            fetchFromSanity(SIDEBAR.categoriesQuery),
            fetchFromSanity(SIDEBAR.tagsQuery),
            fetchFromSanity(SIDEBAR.recentPostsQuery),
          ]);
          renderSidebarCategories(categories || []);
          renderSidebarTags(tags || []);
          renderSidebarRecentPosts(recent || []);
        } catch (e) {
          console.error("Failed to load sidebar data", e);
          document.getElementById("blogCategoriesList").innerHTML =
            '<li style="padding:12px 0;color:#666;text-align:center">Unavailable</li>';
          document.getElementById("blogTagsCloud").innerHTML =
            '<div style="color:#666">Unavailable</div>';
          document.getElementById("blogRecentPostsList").innerHTML =
            '<li style="padding:12px 0;color:#666;text-align:center">Unavailable</li>';
        }
      }

      function renderSidebarCategories(categories) {
        const list = document.getElementById("blogCategoriesList");
        if (!categories || categories.length === 0) {
          list.innerHTML =
            '<li style="padding:12px 0;color:#666;text-align:center">No categories</li>';
          return;
        }
        list.innerHTML = categories
          .map(
            (cat) => `
                <li class="blog-category-item" data-cat-slug="${cat.slug?.current || cat.slug || ""}" style="padding:10px 0;display:flex;justify-content:space-between;align-items:center;">
                    <span>${escapeHtml(cat.title)}</span>
                    <span style="background:var(--dark);color:var(--accent);padding:4px 8px;border-radius:12px;font-size:0.85em">${cat.count || 0}</span>
                </li>
            `,
          )
          .join("");
      }

      function renderSidebarTags(tags) {
        const cloud = document.getElementById("blogTagsCloud");
        if (!tags || tags.length === 0) {
          cloud.innerHTML = '<div style="color:#666">No tags</div>';
          return;
        }
        cloud.innerHTML = tags
          .slice(0, 30)
          .map(
            (t) =>
              `<span class="tag" style="cursor:pointer;margin:6px;">${escapeHtml(t.title)}</span>`,
          )
          .join("");
      }

      function renderSidebarRecentPosts(posts) {
        const list = document.getElementById("blogRecentPostsList");
        if (!posts || posts.length === 0) {
          list.innerHTML =
            '<li style="padding:12px 0;color:#666;text-align:center">No recent posts</li>';
          return;
        }
        list.innerHTML = posts
          .map(
            (p) => `
                <li class="blog-recent-post-item" style="padding:10px 0;" data-slug="${p.slug?.current || p.slug || ""}">
                    <div style="font-weight:600;">${escapeHtml(p.title)}</div>
                    <div style="color:#888;font-size:0.85em">${p.publishedAt ? formatDate(p.publishedAt) : ""}</div>
                </li>
            `,
          )
          .join("");

        // Add click handlers
        const items = document.querySelectorAll(".blog-recent-post-item");
        items.forEach((it) =>
          it.addEventListener("click", () => {
            const slug = it.dataset.slug;
            if (slug) window.location.href = `blog-post.html?slug=${slug}`;
          }),
        );
      }

      

      function renderPortableTextToHtml(blocks) {
        if (!blocks) return "";
        if (typeof blocks === "string") return `<p>${escapeHtml(blocks)}</p>`;
        if (!Array.isArray(blocks))
          return `<pre>${escapeHtml(JSON.stringify(blocks))}</pre>`;

        return blocks
          .map((block) => {
            if (block._type === "block") {
              const text = (block.children || [])
                .map((c) => c.text || "")
                .join("");
              return `<p>${escapeHtml(text)}</p>`;
            }
            // image object
            if (block._type === "image") {
              const src = buildSanityImageUrl(block.asset || block, 1000, 600);
              return `<figure><img src="${src}" style="max-width:100%;height:auto;border-radius:6px;" alt=""></figure>`;
            }
            // fallback for unknown types
            return `<pre>${escapeHtml(JSON.stringify(block))}</pre>`;
          })
          .join("");
      }

      function escapeHtml(str) {
        return String(str)
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      async function loadPost() {
        const slug = getQueryParam("slug");
        if (!slug) {
          showNotFound();
          return;
        }

        const QUERY = `*[_type == "post" && slug.current == "${slug}"][0]{
                _id,
                title,
                slug,
                publishedAt,
                excerpt,
                body,
                featured,
                mainImage{asset->{_id,url}},
                "category": categories[0]->{_id,title,slug},
                "categories": categories[]->{_id,title,slug},
                "tags": tags[]->{_id,title,slug},
                author->{_id,name,image{asset->{_id,url}}}
            }`;

        try {
          const result = await fetchFromSanity(QUERY);
          if (result) {
            renderPost(result);
            return;
          }
          showNotFound();
        } catch (err) {
          console.error(err);
          showNotFound();
        }
      }

      function renderPost(post) {
        const hero = document.getElementById("postHero");
        const titleEl = document.getElementById("postTitle");
        const dateEl = document.getElementById("postDate");
        const authorEl = document.getElementById("postAuthor");
        const readTimeEl = document.getElementById("postReadTime");
        const categoryEl = document.getElementById("postCategory");
        const heroImg = document.getElementById("postHeroImage");
        const bodyEl = document.getElementById("postBody");
        const tagsEl = document.getElementById("postTags");

        titleEl.textContent = post.title || "Untitled Article";
        dateEl.textContent = post.publishedAt
          ? formatDate(post.publishedAt)
          : "";
        authorEl.textContent = post.author?.name || "Author";
        readTimeEl.textContent = calculateReadTime(post.body || post.excerpt);
        categoryEl.textContent = post.category?.title || "";

        const heroUrl = buildSanityImageUrl(post.mainImage);
        heroImg.src = heroUrl;
        heroImg.alt = post.title || "Article image";

        // Body rendering
        bodyEl.innerHTML =
          renderPortableTextToHtml(post.body) ||
          `<p>${escapeHtml(post.excerpt || "")}</p>`;

        // Tags
        if (post.tags && post.tags.length) {
          tagsEl.style.display = "flex";
          tagsEl.innerHTML = post.tags
            .map((t) => `<span class="tag">${escapeHtml(t.title)}</span>`)
            .join("");
        }

        hero.style.display = "block";
        bodyEl.style.display = "block";
      }

      function showNotFound() {
        document.getElementById("postNotFound").style.display = "block";
      }

      document.addEventListener("DOMContentLoaded", function () {
        loadPost();
        loadSidebar();
      });
    </script>
    <div id="footer-placeholder"></div>
    <script src="assets/js/load-header-footer.js"></script>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Additional Scripts -->
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/accordions.js"></script>
    <script src="assets/js/custom-services-menu.js"></script>
    <script src="assets/js/load-header-footer.js"></script>
  </body>
</html>
